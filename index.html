<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WeddingKnotz by MC - Auto Drive Gallery (Fixed)</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  <!-- Ionicons -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <!-- Tailwind Theme Ext -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            beige: '#FDF5EC',
            gold: '#B89A6B',
            'gold-dark': '#9c815a'
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            serif: ['Playfair Display', 'serif']
          }
        }
      }
    }
  </script>

  <style>
    :root { --leaf-size-min: 20px; --leaf-size-max: 56px; }
    body { background-color: #FDF5EC; color: #333; }

    /* Blurred floating leaves background */
    .leaves-bg { position: fixed; inset: 0; overflow: hidden; z-index: 0; pointer-events: none; filter: blur(2px); opacity: .25; }
    .leaf { position: absolute; width: clamp(var(--leaf-size-min), 5vw, var(--leaf-size-max)); aspect-ratio: 1/1; background: radial-gradient(ellipse at 30% 30%, #c9b18f 0%, #b89a6b 40%, #9c815a 100%); -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M50 2c14 8 36 18 46 40-6 26-26 46-46 56C30 88 10 68 4 42 14 20 36 10 50 2z%22/></svg>') center/contain no-repeat; mask: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M50 2c14 8 36 18 46 40-6 26-26 46-46 56C30 88 10 68 4 42 14 20 36 10 50 2z%22/></svg>') center/contain no-repeat; opacity: .7; animation: floatY linear infinite, sway ease-in-out infinite, spin linear infinite; }
    @keyframes floatY { 0% { transform: translate3d(var(--x,0px), -10vh, 0) rotate(0deg);} 100%{ transform: translate3d(calc(var(--x,0px) + var(--drift,0px)), 110vh, 0) rotate(360deg);} }
    @keyframes sway { 50% { filter: blur(3px);} }
    @keyframes spin { 100% { rotate: 1turn; } }

    /* Hero slideshow */
    #hero-slideshow { position: relative; height: 85vh; width: 100%; background-color: #e2e8f0; overflow: hidden; }
    .slide { position: absolute; inset: 0; background-size: cover; background-position: center; background-repeat: no-repeat; opacity: 0; transition: opacity 1.5s ease-in-out; z-index: 1; display:flex; align-items:center; justify-content:center; }
    .slide.active { opacity: 0.9; z-index: 2; } /* ↓ reduced by ~10% as requested */
    .slide-overlay { position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,.40), rgba(0,0,0,.30)); z-index: 3; pointer-events:none; }
    #hero-content { position: absolute; inset: 0; z-index: 4; }

    /* Slide internal IMG used only on mobile */
    .slide-img { display:none; width:100%; height:100%; object-fit:cover; max-height:100%; }

    /* Modal transitions */
    .modal { transition: opacity .3s ease, visibility .3s ease; }
    .modal-content { transition: transform .3s ease; }

    .card-hover { transform: translateY(0); transition: transform .3s ease, box-shadow .3s ease; }
    .card-hover:hover { transform: translateY(-6px); box-shadow: 0 20px 40px rgba(0,0,0,.08); }

    /* Small helper UI */
    #debug { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      /* Crossfade helpers for gallery tile swaps */
    .gallery-item { position: relative; }
    .gallery-item img { display:block; }
    .fade-new { position:absolute; inset:0; opacity:0; transition: opacity .6s ease; }
    .fade-new.show { opacity:1; }

    /* ===== Mobile tweaks: don't crop hero images =====
       - On small screens we use the internal <img> (object-fit: contain)
         and hide the background-image so the photo won't be cropped.
       - We also reduce the hero height so mobile users see full image without heavy cropping.
    */
    @media (max-width: 768px) {
      #hero-slideshow { height: auto; min-height: 50vh; padding: 6vh 0; }
      .slide { position: relative; background-image: none !important; background-size: auto !important; background-position: center !important; }
      .slide-img { display:block; object-fit:contain; height:auto; max-width:100%; max-height:60vh; }
      .slide-overlay { background: linear-gradient(to bottom, rgba(0,0,0,.25), rgba(0,0,0,.15)); }
      #hero-content { padding-top: 1rem; padding-bottom: 1rem; }
    }
  </style>
    <link rel="icon" href="https://drive.google.com/thumbnail?id=1MNymjbdHVCjYIlstZcB-iK6XoDETdGCU&sz=w2000" />

  <style>
    /* Floating PNG flowers / logo behind content */
    .floating-png { position:absolute; width:clamp(60px,6vw,160px); opacity:.12; z-index:0; mix-blend-mode:multiply; transform-origin:center; animation: floatP linear infinite; pointer-events:none; }
    @keyframes floatP { 0%{transform:translateY(-10vh) rotate(0deg)} 50%{transform:translateY(60vh) rotate(180deg)} 100%{transform:translateY(-10vh) rotate(360deg)} }
  </style>
</head>
<body class="font-sans relative">
  <!-- Floating leaves background -->
  <div class="leaves-bg" id="leaves"></div>

  <!-- Header -->
  <header class="bg-beige/90 backdrop-blur-md sticky top-0 z-50 shadow-sm">
    <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
      <a href="#home" class="nav-link">
        <img src="https://drive.google.com/thumbnail?id=1MNymjbdHVCjYIlstZcB-iK6XoDETdGCU&sz=w2000" alt="WeddingKnotz Logo" class="h-16 w-auto" />
      </a>

      <!-- Desktop Nav -->
      <div class="hidden md:flex items-center gap-8">
        <a href="#home" class="nav-link text-gray-700 hover:text-gold transition">Home</a>
        <a href="#portfolio" class="nav-link text-gray-700 hover:text-gold transition">Portfolio</a>
        <a href="#packages" class="nav-link text-gray-700 hover:text-gold transition">Packages</a>
        <a href="#about" class="nav-link text-gray-700 hover:text-gold transition">About</a>
        <a href="#contact" class="nav-link bg-gold text-white font-bold py-2 px-5 rounded-lg shadow-md hover:bg-gold-dark transition">Book Now</a>
      </div>

      <!-- Mobile -->
      <button id="menu-btn" class="md:hidden text-3xl text-gray-700" aria-label="Open menu">
        <ion-icon name="menu-outline"></ion-icon>
      </button>
    </nav>
    <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 w-full bg-beige shadow-lg z-40">
      <a href="#home" class="nav-link block py-3 px-6 text-gray-700 hover:bg-gray-100">Home</a>
      <a href="#portfolio" class="nav-link block py-3 px-6 text-gray-700 hover:bg-gray-100">Portfolio</a>
      <a href="#packages" class="nav-link block py-3 px-6 text-gray-700 hover:bg-gray-100">Packages</a>
      <a href="#about" class="nav-link block py-3 px-6 text-gray-700 hover:bg-gray-100">About</a>
      <a href="#contact" class="nav-link block py-4 px-6 bg-gold text-white font-bold text-center hover:bg-gold-dark">Book Now</a>
    </div>
  </header>

  <!-- Main Page -->
  <div id="main-page">
    <main>
      <!-- HERO (auto from Drive) -->
      <section id="home" class="relative">
        <div id="hero-slideshow" data-editable data-key="hero">
          <!-- Two layers (keeps desktop behavior). Each slide now contains an <img> used only on mobile (via media query). -->
          <div class="slide active" id="hero-slide-a" style="background-image:url('');">
            <img class="slide-img" alt="Hero A" src="">
          </div>
          <div class="slide" id="hero-slide-b" style="background-image:url('');">
            <img class="slide-img" alt="Hero B" src="">
          </div>
          <div class="slide-overlay"></div>
        </div>

        <div id="hero-content" class="flex items-center justify-center text-center text-white p-6">
          <div>
            <h1 class="text-5xl md:text-7xl font-bold font-serif mb-6 leading-tight text-gold-dark drop-shadow">A Promise With Every Click</h1>
            <a href="#portfolio" class="bg-gold text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg hover:bg-gold-dark transition">View Portfolio</a>
          </div>
        </div>

      <!-- ABOUT + TEAM (unchanged content) -->
      <section id="about" class="py-24 bg-white relative z-10">
        <div class="container mx-auto px-6">
          <div class="flex flex-col md:flex-row items-center gap-12">
            <div class="w-full md:w-1/3 relative" data-editable data-key="about-photo-mc">
              <img src="https://drive.google.com/thumbnail?id=19gPIYXq6NgNYO1rXE70Q3G6hP_K3nTgs&sz=w2000" alt="Photo of MC" class="rounded-2xl shadow-xl w-full object-cover" />
            </div>
            <div class="w-full md:w-2/3">
              <h2 class="text-4xl font-bold font-serif text-gold mb-4">About Me, MC</h2>
              <p class="text-lg text-gray-700 mb-6">Welcome to WeddingKnotz! I'm MC, the eye behind the lens. I capture the raw, unfiltered emotions that make your wedding day uniquely yours. I believe in storytelling through frames that feel timeless and authentic.</p>
              <p class="text-lg text-gray-700">With 5+ years behind the camera, from grand ceremonies to quiet glances, my team and I are here to preserve it all with care and craft.</p>
            </div>
          </div>

          <div class="mt-20 text-center">
            <h3 class="text-3xl font-bold font-serif text-gold mb-12">Meet The Team</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
              <div class="relative bg-beige p-6 rounded-2xl shadow-xl card-hover" data-editable data-key="team-mc">
                <img src="https://drive.google.com/thumbnail?id=19gPIYXq6NgNYO1rXE70Q3G6hP_K3nTgs&sz=w2000" alt="Founder" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-white shadow-md object-cover" />
                <h4 class="text-xl font-bold font-serif mb-1">MC - aka Anandharajan</h4>
                <p class="text-gold font-semibold mb-2">Lead Candid Photographer & All Rounder</p>
                <p class="text-gray-600 text-sm">Started as a wildlife photographer and founded “WeddingKnotz by MC”. The creative mind behind our photographs.</p>
              </div>
              <div class="relative bg-beige p-6 rounded-2xl shadow-xl card-hover" data-editable data-key="team-aravindh">
                <img src="https://drive.google.com/thumbnail?id=1nAzMcKsHe6Du35-I1uR4mBBiNb3Z4O9o&sz=w2000" alt="Aravindh" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-white shadow-md object-cover" />
                <h4 class="text-xl font-bold font-serif mb-1">Aravindh</h4>
                <p class="text-gold font-semibold mb-2">Traditional Photographer & Album Designer</p>
                <p class="text-gray-600 text-sm">Our second member—loyal, precise, and a pro album designer.</p>
              </div>
              <div class="relative bg-beige p-6 rounded-2xl shadow-xl card-hover" data-editable data-key="team-sharukan">
                <img src="https://drive.google.com/thumbnail?id=1ufnVoKeDizBdWCFrks-qozVboKNDBBo3&sz=w2000" alt="Sharukan" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-white shadow-md object-cover" />
                <h4 class="text-xl font-bold font-serif mb-1">Sharukan</h4>
                <p class="text-gold font-semibold mb-2">Traditional Videographer & Video Editor</p>
                <p class="text-gray-600 text-sm">The quiet powerhouse behind our reels and cinematic edits.</p>
              </div>
              <div class="relative bg-beige p-6 rounded-2xl shadow-xl card-hover" data-editable data-key="team-mohan">
                <img src="https://drive.google.com/thumbnail?id=1P5QLAyfEwIXMxJStN-FzjgzgMOIQ7xvW&sz=w2000" alt="Mohan" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-white shadow-md object-cover" />
                <h4 class="text-xl font-bold font-serif mb-1">Mohan</h4>
                <p class="text-gold font-semibold mb-2">Cinematic Candid Videographer</p>
                <p class="text-gray-600 text-sm">The eye for fleeting moments—and MC’s classmate.</p>
              </div>
              <!-- JOIN OUR TEAM card -->
              <a href="https://wa.me/919360570641?text=Hi%20MC%2C%20I%27m%20interested%20in%20joining%20your%20team" target="_blank" rel="noopener noreferrer" class="block">
                <div class="relative bg-beige p-6 rounded-2xl shadow-xl card-hover hover:scale-[1.02] transition-transform text-center">
                  <div class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-white shadow-md bg-white flex items-center justify-center text-3xl font-bold text-gold">
                    +
                  </div>
                  <h4 class="text-xl font-bold font-serif mb-1">Join Our Team</h4>
                  <p class="text-gold font-semibold mb-2">Want to be part of WeddingKnotz?</p>
                  <p class="text-gray-600 text-sm">Tap to start a WhatsApp chat — send your portfolio or CV and we'll get back to you.</p>
                  <div class="mt-4">
                    <span class="inline-block bg-gold text-white px-4 py-2 rounded-full font-semibold">Message on WhatsApp</span>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- PORTFOLIO (auto from Drive) -->
      <section id="portfolio" class="py-24 bg-beige relative z-10">
        <div class="container mx-auto px-6">
          <h2 class="text-4xl font-bold font-serif text-center text-gold mb-4">Our Work</h2>
          <p class="text-center text-lg text-gray-600 mb-12 max-w-xl mx-auto">A selection of favorite moments. Click any image to view larger. (Auto-updates from your Drive folder)</p>
          <div id="gallery-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>

          <!-- Debug / Test results -->
          <details class="mt-8">
            <summary class="cursor-pointer text-sm text-gray-500">Debug & Tests</summary>
            <pre id="debug" class="text-xs p-3 bg-white/70 rounded-lg overflow-auto max-h-64"></pre>
          </details>
        </div>
      </section>

      <!-- PACKAGES -->
      <section id="packages" class="py-24 bg-white relative z-10">
        <div class="container mx-auto px-6">
          <h2 class="text-4xl font-bold font-serif text-center text-gold mb-4">Our Packages</h2>
          <p class="text-center text-lg text-gray-600 mb-12 max-w-xl mx-auto">We offer tailored packages to fit your special day perfectly.</p>

          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div class="relative bg-beige p-8 rounded-2xl shadow-xl text-center border-t-4 border-gold card-hover">
              <h3 class="text-2xl font-bold font-serif mb-3">Package 1</h3>
              <p class="text-3xl font-bold text-gold mb-4">₹20,000</p>
              <ul class="text-gray-700 mb-6 space-y-2">
                <li>5 Hours single session</li>
                <li>1 Traditional Photographer</li>
                <li>1 Traditional Videographer</li>
                <li>Album with 150 edited photos</li>
                <li>Pendrive with Full Video</li>
                <li>Online Gallery</li>
              </ul>
              <a href="#contact" class="font-bold text-gold-dark hover:text-gold">Inquire Now →</a>
            </div>

            <div class="relative bg-beige p-8 rounded-2xl shadow-xl text-center border-t-4 border-gold card-hover">
              <h3 class="text-2xl font-bold font-serif mb-3">Package 2</h3>
              <p class="text-3xl font-bold text-gold mb-4">₹25,000</p>
              <ul class="text-gray-700 mb-6 space-y-2">
                <li>5 Hours single session</li>
                <li>1 Traditional Photographer</li>
                <li>1 Candid Photographer</li>
                <li>Album with 200 edited photos</li>
                <li>Online Gallery</li>
              </ul>
              <a href="#contact" class="font-bold text-gold-dark hover:text-gold">Inquire Now →</a>
            </div>

            <div class="relative bg-beige p-8 rounded-2xl shadow-xl text-center border-t-4 border-gold card-hover">
              <h3 class="text-2xl font-bold font-serif mb-3">Package 3</h3>
              <p class="text-3xl font-bold text-gold mb-4">₹28,000</p>
              <ul class="text-gray-700 mb-6 space-y-2">
                <li>5 Hours single session</li>
                <li>1 Traditional Photographer</li>
                <li>1 Candid Photographer</li>
                <li>1 Candid Videographer</li>
                <li>Album with 200 edited photos</li>
                <li>3–5 minute highlight film</li>
                <li>Online Gallery</li>
              </ul>
              <a href="#contact" class="font-bold text-gold-dark hover:text-gold">Inquire Now →</a>
            </div>

            <div class="relative bg-white p-8 rounded-2xl shadow-2xl text-center border-t-4 border-gold-dark scale-105 card-hover">
              <p class="absolute -top-3 left-1/2 -translate-x-1/2 bg-gold-dark text-white text-sm font-bold px-4 py-1 rounded-full">Best Seller</p>
              <h3 class="text-2xl font-bold font-serif mb-3">Package 4</h3>
              <p class="text-3xl font-bold text-gold-dark mb-4">₹40,000</p>
              <ul class="text-gray-700 mb-6 space-y-2">
                <li>5 Hours single session</li>
                <li>1 Traditional Photographer</li>
                <li>1 Traditional Videographer</li>
                <li>1 Candid Photographer</li>
                <li>1 Candid Videographer</li>
                <li>Pendrive with Full Video</li>
                <li>Album with 200 edited photos</li>
                <li>3–5 minute highlight film</li>
                <li>Online Gallery</li>
              </ul>
              <a href="#contact" class="font-bold text-gold-dark hover:text-gold">Inquire Now →</a>
            </div>
          </div>
        </div>
      </section>

      <!-- CONTACT / BOOKING -->
      <section id="contact" class="py-24 bg-white relative z-10">
        <div class="container mx-auto px-6">
          <div class="max-w-3xl mx-auto">
            <h2 class="text-4xl font-bold font-serif text-center text-gold mb-4">Let's Create Magic</h2>
            <p class="text-center text-lg text-gray-700 mb-12">Fill out the form to check availability. We'll finalize your booking via WhatsApp!</p>

            <form id="contact-form" class="bg-beige p-8 md:p-12 rounded-2xl shadow-xl">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                  <label for="name" class="block text-gray-700 font-bold mb-2">Full Name</label>
                  <input id="name" name="name" type="text" class="w-full px-4 py-3 bg-white rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold" required />
                </div>
                <div>
                  <label for="email" class="block text-gray-700 font-bold mb-2">Email Address</label>
                  <input id="email" name="email" type="email" class="w-full px-4 py-3 bg-white rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold" required />
                </div>
                <div>
                  <label for="phone" class="block text-gray-700 font-bold mb-2">Phone Number</label>
                  <input id="phone" name="phone" type="tel" class="w-full px-4 py-3 bg-white rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold" required />
                </div>
                <div>
                  <label for="pkg1" class="block text-gray-700 font-bold mb-2">Package for Day 1</label>
                  <select id="pkg1" name="pkg1" class="w-full px-4 py-3 bg-white rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold" required>
                    <option value="">Select a package...</option>
                    <option>Package 1</option>
                    <option>Package 2</option>
                    <option>Package 3</option>
                    <option>Package 4</option>
                  </select>
                </div>
                <div>
                  <label for="date1" class="block text-gray-700 font-bold mb-2">Day 1 Event Date</label>
                  <input id="date1" name="date1" type="date" class="w-full px-4 py-3 bg-white rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold" required />
                </div>
                <div>
                  <label for="pkg2" class="block text-gray-700 font-bold mb-2">Package for Day 2 (optional)</label>
                  <select id="pkg2" name="pkg2" class="w-full px-4 py-3 bg-white rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold">
                    <option value="">None</option>
                    <option>Package 1</option>
                    <option>Package 2</option>
                    <option>Package 3</option>
                    <option>Package 4</option>
                  </select>
                </div>
                <div>
                  <label for="date2" class="block text-gray-700 font-bold mb-2">Day 2 Event Date</label>
                  <input id="date2" name="date2" type="date" class="w-full px-4 py-3 bg-white rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold" />
                </div>
              </div>
              <div class="mb-6">
                <label for="message" class="block text-gray-700 font-bold mb-2">Tell us about your event</label>
                <textarea id="message" name="message" rows="6" class="w-full px-4 py-3 bg-white rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold" placeholder="Please share details like your venue, guest count, etc."></textarea>
              </div>
              <div class="text-center">
                <button type="submit" class="bg-gold text-white font-bold py-3 px-10 rounded-lg text-lg shadow-lg hover:bg-gold-dark transition">Prepare Inquiry</button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-gray-400 py-12 relative z-10">
    <div class="container mx-auto px-6 text-center">
      <div class="flex justify-center gap-6 mb-6">
        <a href="https://www.instagram.com/weddingknotz_by_mc?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" class="text-3xl hover:text-white transition" aria-label="Instagram"><ion-icon name="logo-instagram"></ion-icon></a>
        <a href="https://pin.it/3JcEP5OsD" target="_blank" class="text-3xl hover:text-white transition" aria-label="Pinterest"><ion-icon name="logo-pinterest"></ion-icon></a>
      </div>
      <p>&copy; 2025 WeddingKnotz by MC. All Rights Reserved.</p>
    </div>
  </footer>

  <!-- Lightbox -->
  <div id="lightbox" class="hidden fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4">
    <button id="lightbox-close" class="absolute top-4 right-6 text-white text-5xl" aria-label="Close">&times;</button>
    <img id="lightbox-img" src="" alt="Enlarged gallery image" class="max-w-full max-h-full rounded-lg" />
  </div>

  <!-- WhatsApp Modal -->
  <div id="whatsapp-modal" class="modal hidden fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4 opacity-0 invisible">
    <div class="modal-content bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center transform scale-95">
      <h3 id="modal-title" class="text-2xl font-bold font-serif mb-4">Title</h3>
      <p id="modal-message" class="text-gray-700 mb-6">Message</p>
      <div id="modal-buttons" class="space-y-4"></div>
      <button id="modal-close" class="mt-6 text-gray-500 hover:text-gray-700 text-sm">Close</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Generate floating leaves
      const leaves = document.getElementById('leaves');
      const LEAF_COUNT = 14;
      for (let i = 0; i < LEAF_COUNT; i++) {
        const el = document.createElement('div');
        el.className = 'leaf';
        const startX = Math.random() * window.innerWidth;
        const duration = 18 + Math.random() * 18; // 18–36s
        const delay = -Math.random() * duration; // start at random progress
        const drift = (Math.random() * 120 - 60) + 'px';
        el.style.left = startX + 'px';
        el.style.setProperty('--x', Math.random() * 40 - 20 + 'px');
        el.style.setProperty('--drift', drift);
        el.style.animationDuration = duration + 's, ' + (6 + Math.random() * 6) + 's, ' + (20 + Math.random() * 20) + 's';
        el.style.animationDelay = delay + 's, ' + (Math.random() * 2) + 's, ' + (Math.random() * 5) + 's';
        leaves.appendChild(el);
      }

      // Add floating PNG decorations (using your logo). These are low-opacity, slow-moving elements.
      (function addFloatingPNGs(){
        const LOGO_PNG = 'https://drive.google.com/thumbnail?id=1MNymjbdHVCjYIlstZcB-iK6XoDETdGCU&sz=w800';
        const PNG_COUNT = 8;
        for (let i = 0; i < PNG_COUNT; i++){
          const p = document.createElement('img');
          p.className = 'floating-png';
          p.src = LOGO_PNG;
          // spread across viewport
          p.style.left = (Math.random() * 100) + 'vw';
          // start slightly above or within view
          p.style.top = (-20 + Math.random() * 140) + 'vh';
          p.style.animationDuration = (20 + Math.random() * 30) + 's';
          p.style.opacity = (0.06 + Math.random() * 0.14).toString();
          p.style.transform = `scale(${0.6 + Math.random() * 0.9})`;
          leaves.appendChild(p);
        }
      })();

      // Page navigation
      const mainPage = document.getElementById('main-page');
      const navLinks = document.querySelectorAll('.nav-link');
      const mobileMenu = document.getElementById('mobile-menu');
      const showPage = () => { window.scrollTo({ top: 0, behavior: 'smooth' }); mainPage.classList.remove('hidden'); mobileMenu.classList.add('hidden'); };
      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          const href = link.getAttribute('href');
          if (!href) return;
          if (href.startsWith('#')) { showPage(); if (href !== '#home' && href !== '#') { setTimeout(() => document.querySelector(href)?.scrollIntoView({ behavior: 'smooth' }), 120); } }
        });
      });
      document.getElementById('menu-btn').addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });

      /* ==========================
         GOOGLE DRIVE AUTO-LOADER (CORS-safe)
         Folder: 1USlCDtXB3eFUAlB_PjDLmbzIDEV3bqRC
         Multi-source parsing to handle different Drive HTML layouts
         ========================== */
      const DRIVE_FOLDER_ID = '1USlCDtXB3eFUAlB_PjDLmbzIDEV3bqRC';
      const DRIVE_SOURCE_URLS = [
        `https://drive.google.com/embeddedfolderview?id=${DRIVE_FOLDER_ID}`,
        `https://drive.google.com/embeddedfolderview?id=${DRIVE_FOLDER_ID}%23grid`, // encoded '#grid'
        `https://drive.google.com/drive/folders/${DRIVE_FOLDER_ID}`
      ];

      async function fetchViaProxy(url) {
        // r.jina.ai mirrors the URL content with permissive CORS
        const proxied = `https://r.jina.ai/${url}`;
        const res = await fetch(proxied, { cache: 'no-cache' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        return await res.text();
      }

      function extractFileIdsFromHtml(html) {
        const ids = new Set();
        // Pattern 1: thumbnail?id=FILEID
        for (const m of html.matchAll(/thumbnail\?id=([a-zA-Z0-9_-]+)/g)) ids.add(m[1]);
        // Pattern 2: /file/d/FILEID/
        for (const m of html.matchAll(/\/file\/d\/([a-zA-Z0-9_-]{20,})\//g)) ids.add(m[1]);
        // Pattern 3: data-id="FILEID"
        for (const m of html.matchAll(/data-id=\"([a-zA-Z0-9_-]{20,})\"/g)) ids.add(m[1]);
        // Pattern 4: id:"FILEID" in inline JSON
        for (const m of html.matchAll(/\u0008id":"([a-zA-Z0-9_-]{20,})"/g)) ids.add(m[1]);
        return Array.from(ids);
      }

      async function loadDriveImageUrls() {
        const allIds = new Set();
        for (const url of DRIVE_SOURCE_URLS) {
          try {
            const html = await fetchViaProxy(url);
            extractFileIdsFromHtml(html).forEach(id => allIds.add(id));
          } catch (e) {
            logDebug('Source fetch failed', { url, error: String(e) });
          }
        }
        const urls = Array.from(allIds).map(id => `https://drive.google.com/thumbnail?id=${id}&sz=w2000`);
        if (!urls.length) logDebug('No image IDs found. Ensure folder is public (Anyone with link → Viewer).');
        return urls;
      }

      // HERO: cycle through ALL photos using two layers; rotate every 3s
      let heroTimer = null;
      let heroUrls = [];
      let heroIndex = 0;

      function setHeroBackground(el, url){
        // always set background-image (keeps desktop unchanged)
        el.style.backgroundImage = `url('${url}')`;
        // also set internal <img> src so mobile (which hides background-image) will display full image
        const img = el.querySelector('img.slide-img');
        if (img) img.src = url;
      }

      async function refreshHeroFromDrive() {
        const urls = await loadDriveImageUrls();
        if (!urls.length) { logDebug('Hero refresh skipped: 0 URLs'); return; }
        heroUrls = urls.slice(); // take ALL
        heroIndex = 0;
        const a = document.getElementById('hero-slide-a');
        const b = document.getElementById('hero-slide-b');
        if (!a || !b) return;
        setHeroBackground(a, heroUrls[heroIndex % heroUrls.length]);
        setHeroBackground(b, heroUrls[(heroIndex+1) % heroUrls.length]);
      }

      function startHeroRotation() {
        const a = document.getElementById('hero-slide-a');
        const b = document.getElementById('hero-slide-b');
        if (!a || !b) return;
        let showA = true;
        if (heroTimer) clearInterval(heroTimer);
        heroTimer = setInterval(() => {
          if (!heroUrls.length) return;
          heroIndex = (heroIndex + 1) % heroUrls.length;
          const nextUrl = heroUrls[heroIndex];
          if (showA) {
            setHeroBackground(b, nextUrl);
            a.classList.remove('active');
            b.classList.add('active');
          } else {
            setHeroBackground(a, nextUrl);
            b.classList.remove('active');
            a.classList.add('active');
          }
          showA = !showA;
        }, 3000); // 3s interval
      }

      // GALLERY: fill grid with 12 random images, refresh periodically
      const galleryGrid = document.getElementById('gallery-grid');
      async function refreshGalleryFromDrive() {
        const urls = await loadDriveImageUrls();
        if (!urls.length) {
          galleryGrid.innerHTML = `
            <div class='col-span-full text-center text-sm text-gray-500'>
              No images detected. Make sure the Drive folder is public and contains images. 
            </div>`;
          return;
        }
        const want = 12;
        const show = pickRandom(urls, want);
        // if grid empty, initial render
        if (!galleryGrid.children.length) {
          galleryGrid.innerHTML = show.map(url => `
            <div class="gallery-item rounded-lg shadow-lg overflow-hidden cursor-pointer">
              <img loading="lazy" src="${url}" alt="Gallery" class="w-full h-full object-cover transition-transform duration-300 hover:scale-105" />
            </div>
          `).join('');
          bindLightbox();
          return;
        }
        // Smooth crossfade swap for each tile
        const imgs = galleryGrid.querySelectorAll('.gallery-item img');
        imgs.forEach((oldImg, i) => {
          const newUrl = show[i % show.length];
          if (!newUrl || newUrl === oldImg.src) return;
          const wrapper = oldImg.parentElement;
          const next = new Image();
          next.className = 'fade-new w-full h-full object-cover transition-transform duration-300 hover:scale-105';
          next.alt = 'Gallery';
          next.onload = () => {
            wrapper.appendChild(next);
            // force reflow then fade
            void next.offsetWidth;
            next.classList.add('show');
            setTimeout(() => {
              oldImg.remove();
              next.classList.remove('fade-new');
            }, 650);
          };
          next.src = newUrl;
        });
      }

      // Utils
      function pickRandom(arr, n) { return shuffle(arr).slice(0, Math.min(n, arr.length)); }
      function shuffle(arr) { return arr.slice().sort(() => Math.random() - 0.5); }

      // Lightbox binding (for dynamic items)
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      const lightboxClose = document.getElementById('lightbox-close');
      function bindLightbox() {
        document.querySelectorAll('#gallery-grid .gallery-item img').forEach(img => {
          img.addEventListener('click', () => { lightboxImg.src = img.src; lightbox.classList.remove('hidden'); });
        });
      }
      const closeLightbox = () => { lightbox.classList.add('hidden'); lightboxImg.src = ''; };
      lightboxClose.addEventListener('click', closeLightbox);
      lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });

      // Kick off initial loads
      refreshHeroFromDrive().then(startHeroRotation);
      refreshGalleryFromDrive();

      // Periodic refreshes
      setInterval(refreshHeroFromDrive, 60000); // re-pick hero images every 60s
      setInterval(refreshGalleryFromDrive, 30000); // refresh gallery every 30s

      // Contact form → WhatsApp
      const contactForm = document.getElementById('contact-form');
      const pkg2 = document.getElementById('pkg2');
      const date2 = document.getElementById('date2');
      const validateDay2 = () => { if (pkg2 && date2) { date2.required = !!(pkg2.value && pkg2.value !== ''); } };
      if (pkg2) pkg2.addEventListener('change', validateDay2);
      validateDay2();

      const whatsappModal = document.getElementById('whatsapp-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalMessage = document.getElementById('modal-message');
      const modalButtons = document.getElementById('modal-buttons');
      const modalClose = document.getElementById('modal-close');
      const showModal = (title, message, buttonsHtml) => { modalTitle.textContent = title; modalMessage.textContent = message; modalButtons.innerHTML = buttonsHtml; whatsappModal.classList.remove('hidden', 'opacity-0', 'invisible'); whatsappModal.querySelector('.modal-content').classList.remove('scale-95'); };
      const closeModal2 = () => { whatsappModal.classList.add('opacity-0', 'invisible'); whatsappModal.querySelector('.modal-content').classList.add('scale-95'); setTimeout(() => whatsappModal.classList.add('hidden'), 300); };
      modalClose.addEventListener('click', closeModal2);
      whatsappModal.addEventListener('click', (e) => { if (e.target === whatsappModal) closeModal2(); });

      // --------- TESTS ---------
      const debug = document.getElementById('debug');
      function logDebug(label, data) {
        if (!debug) return;
        const ts = new Date().toLocaleTimeString();
        debug.textContent += `
[${ts}] ${label}: ${typeof data === 'string' ? data : JSON.stringify(data, null, 2)}`;
      }

      (async function runTests(){
        // Test 1: regex extracts IDs from synthetic sample
        const sample = `.../thumbnail?id=ABC123&... <img src=\"https://drive.google.com/thumbnail?id=XYZ789&sz=w2000\">`;
        const ids1 = Array.from(sample.matchAll(/thumbnail\?id=([a-zA-Z0-9_-]+)/g)).map(m=>m[1]);
        console.assert(ids1.length === 2 && ids1[0]==='ABC123' && ids1[1]==='XYZ789', 'Regex should extract 2 ids');
        logDebug('Test1 IDs', ids1);

        // Test 2: multi-pattern extractor finds various ids
        const sample2 = `data-id=\"ID_AAAAAAAAAAAAAAAAAAAAA\" /file/d/ID_BBBBBBBBBBBBBBBBBBBB/ {\"id\":\"ID_CCCCCCCCCCCCCCCCCCCC\"}`;
        const ids2 = extractFileIdsFromHtml(sample2);
        console.assert(ids2.length === 3, 'Extractor should find 3 ids');
        logDebug('Test2 extractor count', ids2.length);

        // Test 3: live fetch returns some URLs (will be 0 if folder is not public)
        const live = await loadDriveImageUrls();
        logDebug('Test3 live url count', live.length);
      })();
      // ------- END TESTS -------
    });
  </script>
</body>
</html>
